<html>
<head>
    <title>Code@LTH Logo</title>
</head>
<body>

    <canvas id="canvas" width="500" height="500"></canvas>

    <script>
    // FIXME: Minor math error when calculating angle of inner vertex
    // TODO: Draw next triangle with an interval in between
    // TODO: Make the triangles "unfold" from nothingness

    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");

    var forceInterval = function(a, x, b) {
        return Math.max(a, Math.min(x, b));
    }

    var clear = function() {
        ctx.fillStyle = '#FFF';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
    }

    var drawC = function(colors) {
        clear();

        if(colors === undefined) {
          colors = [];
          for(i=0; i<4; i++) {
            var r = forceInterval(20, (Math.random()*255).toFixed(), 255);
            var g = forceInterval(20, (Math.random()*255).toFixed(), 255);
            var b = forceInterval(20, (Math.random()*255).toFixed(), 255);
            colors.push('rgb(' + r + ', ' + g + ', ' + b + ')');
          }
        }

        var start = Math.PI/3;
        var step = Math.PI*2/6;
        var spacing = Math.PI/360*5;

        var centerX = 250;
        var centerY = 250;

        var outerRadius = 100;
        var innerRadius = 10;

        for(i=0; i < 4; i++) {
            var a = start+spacing + i*step;
            var dX = Math.cos(a);
            var dY = Math.sin(a);

            // Used for point closest to next polygon
            var b = a + step - spacing*2;
            var dXb = Math.cos(b);
            var dYb = Math.sin(b);

            // Used for inner point
            var c = a + step/2 - spacing*2;
            var dXc = Math.cos(c);
            var dYc = Math.sin(c);

            // Set color for triangle
            ctx.fillStyle = colors[i];

            ctx.beginPath();
            ctx.moveTo(centerX+dX*outerRadius, centerY+dY*outerRadius);
            ctx.lineTo(centerX+dXb*outerRadius, centerY+dYb*outerRadius);
            ctx.lineTo(centerX+dXc*innerRadius, centerY+dYc*innerRadius);
            ctx.lineTo(centerX+dX*outerRadius, centerY+dY*outerRadius);
            ctx.closePath();
            ctx.fill();
        }
    }


    /* You can draw with specific colors like this:
          drawC(["#000", "#F00", "#0F0", "#00F"]);
     */

    /* Or redraw with random colors every x mx:
          var x = 1000;
          drawC();
          setInterval(drawC, x);
     */

    drawC();
    setInterval(drawC, 1000);

    // Initial version written listening to Dragonforce, rock on!  //erb
    </script>
</body>
</html>
